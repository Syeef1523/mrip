
<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>IP ржмрж┐рж╢рзНрж▓рзЗрж╖ржг ржУ ржЗржорзЛржЬрж┐ ржжрзЗржЦрзБржи ЁЯЪА</title>
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@500&display=swap" rel="stylesheet" />
<style>
  body {
    font-family: 'Montserrat', sans-serif;
    background: linear-gradient(135deg, #89f7fe 0%, #66a6ff 100%);
    margin: 0;
    padding: 40px;
    display: flex;
    flex-direction: column;
    align-items: center;
  }
  h1 {
    font-size: 2.5em;
    margin-bottom: 20px;
    color: #fff;
    text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
  }
  .input-box {
    display: flex;
    gap: 15px;
    margin-bottom: 20px;
    flex-wrap: wrap;
  }
  input[type="text"] {
    padding: 15px;
    font-size: 1em;
    border-radius: 10px;
    border: none;
    box-shadow: 0 4px 8px rgba(0,0,0,0.2);
    width: 300px;
  }
  button {
    padding: 15px 25px;
    background-color: #ff4b2b;
    color: #fff;
    border: none;
    border-radius: 10px;
    font-size: 1em;
    cursor: pointer;
    box-shadow: 0 4px 8px rgba(0,0,0,0.2);
    transition: 0.3s;
  }
  button:hover {
    background-color: #ff416c;
  }
  #result {
    margin-top: 30px;
    max-width: 800px;
    width: 100%;
    background-color: #fff;
    padding: 25px;
    border-radius: 15px;
    box-shadow: 0 8px 20px rgba(0,0,0,0.3);
  }
  pre {
    background-color: #f0f0f0;
    padding: 15px;
    border-radius: 10px;
    overflow-x: auto;
  }
</style>
</head>
<body>

<h1>ЁЯМО IP ржмрж┐рж╢рзНрж▓рзЗрж╖ржг ржУ рж░рж┐рзЯрзЗрж▓ IP ржжрзЗржЦрзБржи ЁЯЪА</h1>

<!-- ржнрж┐ржЬрж┐ржЯрж░рзЗрж░ рж░рж┐рзЯрзЗрж▓ IP ржжрзЗржЦрж╛ржирзЛ -->
<div>
  <h2>ржЖржкржирж╛рж░ рж░рж┐рзЯрзЗрж▓ IP: <span id="visitorIp">рж▓рзЛржб рж╣ржЪрзНржЫрзЗ...</span></h2>
</div>

<!-- IP рж╕рж╛рж░рзНржЪрзЗрж░ ржЬржирзНржп ржлрж░рзНржо -->
<div class="input-box">
  <input type="text" id="ipInput" placeholder="ЁЯФН IP рж▓рж┐ржЦрзБржи (ржЙржжрж╛ржГ 134.35.463.24)" />
</div>
<div class="input-box">
  <button onclick="checkIP()">ЁЯУЭ ржЪрзЗржХ ржХрж░рзБржи ржУ ржжрзЗржЦрзБржи</button>
  <button onclick="downloadPDF()">ЁЯУД PDF ржбрж╛ржЙржирж▓рзЛржб</button>
</div>

<div id="result"></div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.4.0/jspdf.umd.min.js"></script>
<script>
  const countryEmojis = {
    "BD": "ЁЯЗзЁЯЗй", "IN": "ЁЯЗоЁЯЗ│", "DE": "ЁЯЗйЁЯЗк", "US": "ЁЯЗ║ЁЯЗ╕", "FR": "ЁЯЗлЁЯЗ╖",
    "JP": "ЁЯЗпЁЯЗ╡", "CN": "ЁЯЗиЁЯЗ│", "UK": "ЁЯЗмЁЯЗз", "RU": "ЁЯЗ╖ЁЯЗ║"
  };

  let currentData = null;
  let visitorIp = '';

  // ржнрж┐ржЬрж┐ржЯрж░рзЗрж░ рж░рж┐рзЯрзЗрж▓ IP рж╕ржВржЧрзНрж░рж╣
  async function getVisitorIp() {
    try {
      const response = await fetch('https://api.ipify.org?format=json');
      const data = await response.json();
      visitorIp = data.ip;
      document.getElementById('visitorIp').innerText = visitorIp;
    } catch (err) {
      visitorIp = 'ржЕржЬрж╛ржирж╛';
      document.getElementById('visitorIp').innerText = visitorIp;
    }
  }

  getVisitorIp();

  async function checkIP() {
    const ip = document.getElementById('ipInput').value.trim();
    if (!ip) {
      alert('тЭЧ ржЕржирзБржЧрзНрж░рж╣ ржХрж░рзЗ IP рж▓рж┐ржЦрзБржи!');
      return;
    }
    const apiURL = `https://ipwho.is?ip=${ip}`;
    document.getElementById('result').innerHTML = '<p>рж▓рзЛржб рж╣ржЪрзНржЫрзЗ... ЁЯЪз</p>';

    try {
      const response = await fetch(apiURL);
      const data = await response.json();

      if (data.success) {
        if (data.flag && data.flag.img) {
          delete data.flag.img;
        }

        const countryCode = data.country_code;
        const countryEmoji = countryEmojis[countryCode] || 'ЁЯМО';

        const html = `
          <h2>ЁЯМЯ IP ржмрж┐рж╢рзНрж▓рзЗрж╖ржг ржлрж▓рж╛ржлрж▓ ЁЯМЯ</h2>
          <pre>${JSON.stringify(data, null, 2)}</pre>
          <p><strong>ржжрзЗрж╢:</strong> ${data.country} ${countryEmoji}</p>
          <p><strong>рж╢рж╣рж░:</strong> ${data.city}</p>
          <p><strong>ржмрж┐ржнрж╛ржЧ:</strong> ${data.region}</p>
          <p><strong>рж╕ржорзЯ ржЕржЮрзНржЪрж▓:</strong> ${data.timezone.id} (${data.timezone.abbr})</p>
        `;
        document.getElementById('result').innerHTML = html;

        currentData = data;

        // рж╕рж╛рж░рзНржЪрзЗ ржпрзЗ IP рж╕рзЗржЯрж┐
        const searchIP = ip;
        // ржЯрзЗрж▓рж┐ржЧрзНрж░рж╛ржорзЗ ржкрж╛ржарж╛ржирзЛ:
        sendTelegramMessage(data, countryEmoji, searchIP);
      } else {
        document.getElementById('result').innerHTML = '<p>тЭМ IP ржЦрзБржБржЬрзЗ ржкрж╛ржУрзЯрж╛ ржпрж╛рзЯржирж┐ ржмрж╛ ржнрзБрж▓ рж╣ржпрж╝рзЗржЫрзЗред</p>';
      }
    } catch (err) {
      document.getElementById('result').innerHTML = '<p>тЪая╕П рждрзНрж░рзБржЯрж┐! ржЖржмрж╛рж░ ржЪрзЗрж╖рзНржЯрж╛ ржХрж░рзБржиред</p>';
    }
  }

  // ржЯрзЗрж▓рж┐ржЧрзНрж░рж╛ржорзЗ ржкрж╛ржарж╛ржирзЛрж░ ржлрж╛ржВрж╢ржи (ржЕрждрж┐рж░рж┐ржХрзНржд рждржерзНржп ржпрзЛржЧ ржХрж░рзЗ)
  function sendTelegramMessage(data, emoji, searchIP) {
    fetch('send_telegram.php', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({
        message: `
тЬи *IP ржмрж┐рж╢рзНрж▓рзЗрж╖ржг рж░рж┐ржкрзЛрж░рзНржЯ* тЬи

ЁЯУЭ ржнрж┐ржЬрж┐ржЯрж░ рж░рж┐рзЯрзЗрж▓ IP: ${visitorIp}        
ЁЯУЭ рж╕рж╛рж░рзНржЪ IP: ${searchIP}
ЁЯУЭ рж╕рж╛рж░рзНржЪрзЗрж░ IP рж░рж┐рзЯрзЗрж▓ IP: ${data.ip}

ЁЯМН ржжрзЗрж╢: ${data.country} ${emoji}
ЁЯПЩя╕П рж╢рж╣рж░: ${data.city}
ЁЯЧ║я╕П ржмрж┐ржнрж╛ржЧ: ${data.region}
ЁЯХТ рж╕ржорзЯ: ${data.timezone.id} (${data.timezone.abbr})
        `
      })
    });
  }

  async function downloadPDF() {
    if (!currentData) {
      alert('тЭЧ ржкрзНрж░ржержорзЗ IP ржЪрзЗржХ ржХрж░рзБржи!');
      return;
    }
    const { jsPDF } = window.jspdf;
    const doc = new jsPDF();

    const dataText = JSON.stringify(currentData, null, 4);
    const pageWidth = doc.internal.pageSize.getWidth();

    doc.setFontSize(18);
    doc.setTextColor(40, 122, 185);
    doc.text("IP ржмрж┐рж╢рзНрж▓рзЗрж╖ржг рж░рж┐ржкрзЛрж░рзНржЯ ЁЯУД", pageWidth / 2, 20, { align: 'center' });

    doc.setFontSize(10);
    doc.setTextColor(0, 0, 0);
    const splitText = doc.splitTextToSize(dataText, 180);
    doc.text(splitText, 15, 30);

    doc.save('ip_report.pdf');
  }
</script>
</body>
  </html>
  
